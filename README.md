# Emergence-evaluation-Framework
This is the code related to our paper 'Evaluation of cotton emergence using UAV-based imagery and deep learning' authored by Aijing Feng, Jianfeng Zhou, Earl Vories and Kenneth Sudduth. In this paper, we developed a methods for cotton seedlings stand count and evaluating canopy size using unmanned aerial vehicle (UAV)-based imaging systems.

## Getting Started
Please read the 'Introduction of the emergence evaluation framework' for environment setting and usage.

## Models and files including 
This framework consists of two major tasks, i.e. model training and emergence evaluation. Users may directly use the model provided to map cotton fields having similar data collection conditions to our experiment in the paper. However, it is expected that users would train a specific model using their own data by following the processing steps described in this paper. The developed framework has not been tested in other crops such as soybean and corn but will be in a future study.

- gui.py
   - An easy use graphical user interface (GUI), users can start the framework here.
- GetLabelimage.m
   - Read the raw RGB image frames, rotate the raw images, guide the users to select the regions had ground labels, segment each seedlings cluster, record the locations and id of the seedlings cluster, calculated row spacing, generate a file that asked the users to type labels on it.
- LablesForMeter.m
  - An easy use graphical user interface (GUI), users can start the framework here.
- GetLabelimage.m
  - Read the rotated images, row spacing file and visual labelling file, crop the images by meters from the raw image frame, calculate the seedling number and canopy size of each meter length image.
- row_4 folder
  - Example images collected for the related paper.
- meter folder
  - A folder generated by the framework that included the cropped images by meters from the raw image frames.
- excel_data.csv
  - A file generated by the framework that included the id and locations of each segmented seedlings. Users will be asked to count the seedlings and type the labels in this file.
- row_space.csv
  - A file generated by the framework that included the row spacing and the image coordinates of four corners of the rectangles the users drawn.
- CNN_4_pretrained_regression.py
  - Build the resnet18 model and use the generated image data to train the parameters.
- resnet18.pth
  - The trained model used the data set related to the paper.
- extractMeterInImages.m
  - Segment the test images by meters and assign them GPS coordinates.
- gps.csv
  - A file generated by the framework that included the image name of the segmented images and their related GPS.
- CNN5_predict.py
  - Predict the stand count and canopy size.
- seedling.csv
  - A file generated by the framework that included the prediction results of stand count and canopy size with their related GPS.
- test_data folder
  - Example images provided for testing.
